<!--
  Generated template for the DenonciationPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="danger">
    <ion-title>Dénoncer</ion-title>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-buttons end>
      <button ion-button="" icon-only="" (click)="takeImage()">
        <ion-icon name="camera"></ion-icon>
      </button>
      <!--<button ion-button="" (click)="selectPDF()">
        <ion-icon name="attach"></ion-icon>
      </button>-->
    </ion-buttons>
  </ion-navbar>

</ion-header>

<ion-content padding>
  <ion-list>
    <!--<ion-item>
      <h4>Avez-vous des documents relatifs à la dénonciation à joindre ? </h4>
      <p>
        <strong>Pièce jointe : </strong>La taille de la pièce jointe ne doit pas dépasser 2 MO.
      </p>
      <p>
        <strong>Note relative à l’envoi de la pièce jointe dans le cas anonyme :</strong>
        Il se peut que le document à joindre contienne des informations cachées (ex : nom de l’auteur) qui <br>
        pourraient compromettre votre anonymat. Prière de les éliminer avant d’attacher le document au présent formulaire.
      </p>
    </ion-item>-->
    <form #f="ngForm" (ngSubmit)="soumettre(f.value)">
        <ion-item>
          <ion-label>L'acte de la denonciation</ion-label>
          <ion-select name="acte" required="required" [(ngModel)]="denonce.acte">
            <ion-option *ngFor="let c of actes?.actes; let i = index" [value]="c.nom">
              {{c.nom}}
            </ion-option>
          </ion-select>
        </ion-item>
        <ion-item>
          <ion-label>Message</ion-label>
          <ion-textarea name="message" [(ngModel)]="denonce.message"></ion-textarea>
        </ion-item>
        <ion-item>
          <ion-label>Dans quelle Région l'acte dénoncé a eu lieu ?</ion-label>
          <ion-select id="region" name="region" #C (ionChange)="onchange(C.value)" [(ngModel)]="denonce.region" required="required">
            <ion-option [value]="r.nom" *ngFor="let r of regions?.regions; let i = index"> {{r.nom}} </ion-option>
          </ion-select>
        </ion-item>
        <ion-item id="ville">
          <ion-label>Dans quelle ville l'acte dénoncé a eu lieu ?</ion-label>
          <ion-select required="required" name="departement" [(ngModel)]="denonce.departement">
            <ion-option [value]="d.nom" *ngFor="let d of departements?.villes; let i = index"> {{d.nom}} </ion-option>
          </ion-select>
        </ion-item>
        <ion-item>
          <ion-label>Spécifiez le secteur/domaine ou l'acte dénoncé s'est déroulé</ion-label>
          <ion-select required="required" name="secteur" [(ngModel)]="denonce.secteur">
            <ion-option [value]="s.libelle" *ngFor="let s of secteurs?.secteurs; let i = index">
              {{s.libelle}}
            </ion-option>
          </ion-select>
        </ion-item>
        <ion-item>
          <ion-label>Dépuis quand l'acte dénoncé dure t-il ?</ion-label>
          <ion-select name="duree" [(ngModel)]="denonce.duree">
            <ion-option>Actuellement</ion-option>
            <ion-option>Depuis 3 - 6 mois </ion-option>
            <ion-option>Un an et plus</ion-option>
            <ion-option>Inconnu </ion-option>
          </ion-select>
        </ion-item>
        <ion-item>
          <ion-label>Dépuis quand avez-vous pris connaissance de l'acte ?</ion-label>
          <ion-select name="periode" [(ngModel)]="denonce.periode">
            <ion-option>Moins 3 - 7 jours</ion-option>
            <ion-option>Depuis 3 - 6 mois </ion-option>
            <ion-option>Entre 3 et 12 mois</ion-option>
            <ion-option>Plus d'un an</ion-option>
          </ion-select>
        </ion-item>
        <ion-item>
          <ion-label>Votre email (Garder l'anonymat si le vous souhaitez)</ion-label>
          <ion-input [(ngModel)]="denonce.email" pattern="^[a-z0-9._-]+@[a-z0-9.-]+\.[a-z]{2,4}$" type="text" name="email"></ion-input>
        </ion-item>
        <ion-item>
          <img src="{{photo}}" class="cadre">
        </ion-item>
        <ion-item>
          <p style="color:red"> {{message}} </p>
        </ion-item>
        <ion-item>
          <p style="color:red"> {{resultat?.contenu}} </p>
        </ion-item>
        <button block="" ion-button="" type="submit" [disabled]="!f.valid">Soumettre</button>
    </form>
  </ion-list>
  <p> Pour une bonne gouvernance, <span style="color: red"> je m'engage... </span> </p>
</ion-content>

<ion-footer>
  <ion-navbar color="danger">
    <button icon-start="" align-self-center="" ion-button="" color="secondary" (click)="goToHome()">
      <ion-icon name="home"></ion-icon> Acceuil
    </button>
    <p>
      © Copyright <strong>Stop Corruption</strong>. Tous Droits Réserves
    </p>
    <p>Conception: digitalafrik.com-MOUBINA-ATLANTIC</p>
  </ion-navbar>
</ion-footer>
